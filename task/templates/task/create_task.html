{% extends 'base.html' %}
{% load static %}
{% load staticfiles %}
{% load django_markdown %}

{% block title %}<title>Создать задачу</title>{% endblock %}

{% block content %}
    <div class="container">
        <h1>Создание задачи</h1>

        <div class="container" style="margin: 5px">
            <label class="control-label col-sm-3" for="task_name">Название:</label>
            <div class="col-sm-9">
                <input type="text" maxlength="30" class="form-control" id="task_name"
                       placeholder="Введите название задачи" autocomplete="off">
            </div>
            <div class="col-sm-offset-3 col-sm-9">{{ form.task_name.errors }}</div>
        </div>

        <div class="container" style="margin: 5px">
            <label class="control-label col-sm-3" for="tags">Тэги:</label>
            <div class="col-sm-9" id="tags">
                <input type="text" maxlength="30" class="form-control"
                       placeholder="Введите тэг" autocomplete="off">
            </div>
            <div class="col-sm-offset-3 col-sm-9">{{ form.tags.errors }}</div>
        </div>

        <div class="container" style="margin: 5px">
            <label class="control-label col-sm-3" for="level">Уровень:</label>
            <div class="col-sm-9">
                <select id="level">
                    <option selected value="1">Low</option>
                    <option value="2">Middle</option>
                    <option value="3">High</option>
                </select>
            </div>
            <div class="col-sm-offset-3 col-sm-9">{{ form.level.errors }}</div>
        </div>

        <div class="container" style="margin: 5px">
            <label class="control-label col-sm-3" for="markdown">Условие:</label>
            <div class="col-sm-9">
                <textarea name="condition" id="markdown"></textarea>
                {% markdown_editor "#markdown" %}
                {% markdown_media %}
            </div>
            <div class="col-sm-offset-3 col-sm-9">{{ form.condition.errors }}</div>
        </div>

        <div class="container" style="margin: 5px">
            <label class="control-label col-sm-3" for="area">Область:</label>
            <div class="col-sm-9">
                <select id="area">
                    <option selected value="1">Java</option>
                    <option value="2">C#</option>
                    <option value="3">Python</option>
                    <option value="4">Ruby</option>
                </select>
            </div>
            <div class="col-sm-offset-3 col-sm-9">{{ form.area.errors }}</div>
        </div>

        <div class="container" style="margin: 5px">
            <label class="control-label col-sm-3" for="answers">Ответы:</label>
            <div class="col-sm-9" id="answers">
                <input type="text" maxlength="30" class="form-control"
                       placeholder="Введите ответ" autocomplete="off">
            </div>
            <div class="col-sm-offset-3 col-sm-9">{{ answer_form.text.errors }}</div>
        </div>

        <div class="container" style="margin: 5px">
            <div class="col-sm-offset-3 col-sm-9">
                <button type="submit" class="btn btn-default" id="create_button">Создать</button>
            </div>
        </div>


        <script>
            $('#create_button').click(function(e){
                var json = JSON.stringify({
                    task_name: $('#task_name').val(),
                    tags: $('#tags input').val(),
                    level: $('#level').val(),
                    markdown: $('#markdown').val(),
                    area: $('#area').val(),
                    answers: $('#answers input').val()
                });
                console.log(json);
                $.ajax({
                    url: "/task/create/",
                    type: 'POST',
                    data: json,
                    success: function (mess) {
                        console.log("YEAH");
                    },
                    error: function(mess){
                        console.log("Error");
                    }
                });
            });
        </script>
    </div>

{% endblock %}